## 事先声明

1、我不会像别人整个详细得不能再详细的文章，恨不得把一本书copy过来。我认为这一点技术含量都没，纯粹是一个体力活。当然，要感谢这些出体力活的人，因为他们整理的文章，我们可以直接拿来当做知识【字典】来使用。

2、如果在工作中不知道怎么使用学到知识，等同于白学。所以我写的文章，应该是告诉读者可以用这类知识，解决什么问题。如果学了还是真的没有使用地方，应该学会留痕，已被需要时候进行查阅。

3、我认为有用的知识，限于我个人能力，如有不足请见谅。

4、我看到一个视频，讲俞敏洪早期创业，给北大学生教雅思课程，说北大学生这么聪明，我只需要给你们讲3节课，给你们疏通雅思考试范围，剩下的你们3天就学会了。同样的，像文章前面的你，可能没有北大学生聪明，但你还是足够聪明，你应该明白我说的这一点。

##1 http 知识普

这里我只贴别人文章

[前端基础篇之HTTP协议](https://juejin.cn/post/6844903844216832007)
[那些前端应该知道的HTTP知识](https://juejin.cn/post/6844903606236233735)

书籍：

- 图解http
- http 权威指南

[更多书籍名单](https://www.zhihu.com/question/19722062)

##2 查看 http 报文

### 2.1 学会使用chrome network

1. 最基本使用技能点：查看某个接口请求、请求方式、请求code、请求时间、请求消耗时间等
2. 稍微复杂技能点，直接看这篇[11+ chrome高级调试技巧，学会效率直接提升666%](https://mp.weixin.qq.com/s?__biz=Mzg4MTYwMzY1Mw==&mid=2247502578&idx=1&sn=acfaa9e54874396a99a464bdde0d6c73&chksm=cf61efd8f81666cebdb1391ba20de720f55b5c6d4a2367a78ef32befb27d433b55ae11a390a6&mpshare=1&scene=1&srcid=0414dENLM6gsTG1kcmgsxQ76&sharer_sharetime=1651408630684&sharer_shareid=74e78a7133700f0ef1f0c299445a08e5&key=eb319dd88aeef9dbe9e2ec13305a0bac69b33fa3759a5db838bc53134ae56423937f6d6964ffbaa8478c2868f039cf11f628633c32d6e809ed6146144bc32073373aa181a2ce44104a537e1211e77a2f2fa97c408586f53448ce6bc39272eded6ea46f734254e161749712cf75576a441f3d032e5c7adc806ccea9219c785e8a&ascene=1&uin=MTg3MzgxMDM2MA%3D%3D&devicetype=Windows+10&version=64080079&lang=zh_CN&exportkey=A2yXbC2jPTJh6XPl3w096A8%3D&acctmode=0&pass_ticket=335gc%2BNaLYoY1guLtvLATCv12dpmMk03l62O%2BhBmTJGkDXNDxOHy8H1MgJHyvHe2&wx_header=0)


### 2.2 code 码

1.  `404` 请求路径找不到。出现这个问题，作为前端开发，不要急着找后端，先看看自己接口路径有没有写错。这里涉及到前端一个路径比对技巧——**用 chrome console 调试面板输入`'client_path'==='serve_path'`，回车看输出结果是false还是true**。



2.  `500` 以上错误服务端错误。出现这个问题，直接找后端排查。（如果你学了http知识，不知道500以上是服务端问题，还在纠结前端怎么解决，是不是学了等于白学）

3. `301`、`302` ，这2个code只有在面试题出现，所以答案即：就是301是永久重定向，而302是临时重定向。如果在详细点答案，看这篇[301和302的区别](https://www.nowcoder.com/ta/review-frontend/review?page=107)。如果是口头面试回答，这2种回答只能算普通，这里我润色一下：

```bash
301是永久重定向，而302是临时重定向。
301比较常用的场景是使用域名跳转。302用来做临时跳转 比如未登陆的用户访问用户中心重定向到登录页面。
作为前端开发，很少涉及这2个code应用场景，一般是服务端或http服务工具做的事情，如果真的使用此场景，应该找运维同事看看具体业务场景适不适合，他们更有经验些。
```

参考：[nodejs 模拟301、302实现重定向](https://juejin.cn/post/6844904163847962638)

4. 304 缓存。也是面试题目出现的，一般结合 etag 和 last-modified考一下，看这篇[理解浏览器缓存以及304状态码](https://juejin.cn/post/6844903512946507790)

5. 其他略

> ps： 像301、302、304，在前端开发基本没用，成为历史包袱，跳槽的时候背一下就得了。


### 2.3 http method

使用get、post 就够了。像delete、update等，简直就是槽点，因为不是所有平台都支持http method所有方法，另外还增加前端使用成本，并且还极容易出错（尤其项目涉及开发众多，那简直是乱用）。

### 2.4 cookie

前端使用 cookie 有2个场景（前提请求头设置`credentials=include`）

1. cookie携带登录态，服务端设置http-only
2. cookie 携带**灰度**环境标识


##3 https 安全协议

https = http + ssl

https 请求可以分为3个过程（这里加key3、key2、key1方便大家理解）
1. 证书验证，获取非对称加密公钥。过程是：服务端存着证书数字签名，当客户端发送请求，服务端返回非对称加密公钥 + 证书数字签名的验密包，客户端**预设**ca验证证书，去验证数字签，如果验证通过，获取非对称加密公钥key3。
2. 非对称加解密，获取对称秘钥key1。过程是：客户端用非对称加密公钥key3。将对称秘钥key1验密包发送给服务端，服务用非对称解密私钥key2解密，获取key1。
3. 对称解密。过程是：直接用key1通信。

非对称加解密，缺点：慢；优点：安全。
对称加解密，缺点：快；优点：不安全。

https 采取http + ssl 综合方式，即安全且速度适中。有一个场景可以直接http的：假设你所在公司，服务端存在一个局部内网，不涉及安全问题，在前端ssr项目，内网请求是可以采用http的。

>ps： https 证书可以自制。自制的证书效果就如同：使用 iphone 下载第3方app，需要认证一个数字证书。说白证书验证都是差不多过程。提供一个 nginx 自制 `https` 证书[教程](https://cyrill.win/articles/2018/07/09/ssl-on-linux)

参考：

[一个故事讲完https](https://mp.weixin.qq.com/s/StqqafHePlBkWAPQZg3NrA)

## 4 http2

对于 http2 有哪些改变？说实在这个对前端不重要，只需知道它对前端性能有很大提升。作为前端开发话，需要等待机会，将公司 http1.0 升级为 http2。

[HTTP/2 相比 1.0 有哪些重大改进？](https://www.zhihu.com/question/34074946)
[http2 和 http1.0 d对比测试](https://http2.akamai.com/demo/http2-lab.html)

> 小公司有一定机会前端可以参与 http1.0 升级 http2.0，但在大公司哪里，这块是在运维架构平台管理着，需要走审批流程。如果你还想尝试，可以自制个人网站

## 5 前端关于 http 性能优化汇总

1. 前端http缓存，那个code返回304的。
2. http2（主要多路复用，性能提升巨大）
3. [前端优化之DNS预解析](https://www.jianshu.com/p/fd5dbd146ec8)
4. [预加载](https://alienzhou.github.io/fe-performance-journey/7-preload/#_1-%E9%A2%84%E5%8A%A0%E8%BD%BD%E6%8A%80%E6%9C%AF)，如果要维持首屏加载指标，勿用。
5. [nginx combo](https://www.cnblogs.com/liangxuru/p/5825944.html)，在不能升级http2情况，http1.0 实现多路复用效果
6. 等等

> ps： 题外话，不论面试题还是什么来着，一提到性能优化，就想做代码优化，搞这搞那？都是错的，第1步，而是看看当前是不是有价值做性能优化。怎么判断了？通过当前项目性能指标现状，如果公司有性能指标工具，那就使用公司，如果没有，去寻找市面上主流开源的工具来代替，工具如：livehouse。

## 6 安全问题

[前端防御性编程](https://juejin.cn/post/6844904014581088270)

## 总结

1. 对前端来说，http 知识能够使用点很少，无非2类：1、和后端对接；2、前端性能优化。真想琢磨，可以自己玩nginx，但那是另外一回事。
2. 计算机术语，有时候不是人看的。所以，我们当对http相关知识理解了，最好把对应术语转化成人话。

> ps：我自己初看https，一堆乱七八糟名词，其实https就是一个**很简单**http不安全问题的解决方案。为什么很简单？如果你不信，可对比你公司业务项目架构，我相信大多数有收益业务项目，一定不简单。了解过后，你再回过头在看 https 简单很。为什么说这个？我看很多前端同事，能够熟悉复杂的业务，一碰到简单技术原理就是十分畏惧。没有必要畏惧，应该采用分治方法，把问题化小。


